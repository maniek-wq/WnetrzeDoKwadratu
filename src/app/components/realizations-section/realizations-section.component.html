<section id="realizacje" class="py-20 md:py-32 bg-white reveal-section" [class.active]="isVisible">
  <div class="container mx-auto px-6 md:px-12 lg:px-24">
    
    <!-- Section Header -->
    <div class="text-center mb-16 reveal-item">
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-dark hero-title-font mb-4">
        Nasze Realizacje
      </h2>
      <p class="text-lg md:text-xl text-gray-medium max-w-2xl mx-auto hero-subtitle-font">
        Zobacz jak wizualizacje zamieniamy w rzeczywistość
      </p>
    </div>
    
    <!-- Slider Container -->
    <div class="relative reveal-item" style="transition-delay: 0.2s">
      
      <!-- Navigation Arrows -->
      <button 
        *ngIf="realizations.length > 1"
        class="slider-arrow left"
        (click)="prevSlide()"
        aria-label="Poprzednia realizacja"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>
      
      <button 
        *ngIf="realizations.length > 1"
        class="slider-arrow right"
        (click)="nextSlide()"
        aria-label="Następna realizacja"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </button>
      
      <!-- Slides -->
      <div class="overflow-hidden">
        <div 
          class="slider-track"
          [style.transform]="'translateX(-' + (currentSlide * 100) + '%)'"
        >
          <div 
            *ngFor="let realization of realizations; let i = index"
            class="slider-slide"
          >
            <!-- Title & Info -->
            <div class="text-center mb-8">
              <p class="text-gray-medium flex items-center justify-center">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                {{ realization.location }} • {{ realization.year }}
              </p>
            </div>
            
            <!-- Comparison Grid -->
            <div class="comparison-wrapper">
              
              <!-- Wizualizacja -->
              <div class="comparison-card group cursor-pointer" (click)="openLightbox(i * 2)">
                <div class="comparison-label visualization">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                  </svg>
                  Wizualizacja
                </div>
                <div class="aspect-[4/3] overflow-hidden rounded-2xl">
                  <img 
                    [src]="realization.visualization" 
                    [alt]="realization.title + ' - Wizualizacja'"
                    loading="lazy"
                    class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                  >
                </div>
              </div>
              
              <!-- VS Badge -->
              <div class="vs-badge">VS</div>
              
              <!-- Realizacja -->
              <div class="comparison-card group cursor-pointer" (click)="openLightbox(i * 2 + 1)">
                <div class="comparison-label realization">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                  </svg>
                  Realizacja
                </div>
                <div class="aspect-[4/3] overflow-hidden rounded-2xl">
                  <img 
                    [src]="realization.realization" 
                    [alt]="realization.title + ' - Realizacja'"
                    loading="lazy"
                    class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                  >
                </div>
              </div>
              
            </div>
            
          </div>
        </div>
      </div>
      
      <!-- Dots Indicator -->
      <div class="dots-container" *ngIf="realizations.length > 1">
        <button 
          *ngFor="let realization of realizations; let i = index"
          class="dot"
          [class.active]="i === currentSlide"
          (click)="goToSlide(i)"
          [attr.aria-label]="'Przejdź do realizacji ' + (i + 1)"
        ></button>
      </div>
      
    </div>
    
  </div>
</section>

<!-- Lightbox -->
<app-lightbox 
  [images]="lightboxImages"
  [currentIndex]="lightboxIndex"
  [isOpen]="lightboxOpen"
  (closed)="closeLightbox()"
></app-lightbox>
